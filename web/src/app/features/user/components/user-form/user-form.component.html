<div class="mb-10">
  <p-button
    severity="info"
    label="Voltar"
    icon="pi pi-arrow-circle-left"
    routerLink="/"
  />
</div>

<form [formGroup]="userForm">

  <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-5">

    <div class="mb-10">
      <p-floatlabel>
        <input pInputText id="inputName" autocomplete="off" formControlName="name" class="w-full" />
        <label for="inputName">Nome</label>
      </p-floatlabel>
      @if (userForm.get('name')?.errors?.['required'] && userForm.get('name')?.touched) {
        <small class="text-red-700 mb-20">Nome é obrigatório</small>
      }
      @if ((userForm.get('name')?.errors?.['minlength'] || userForm.get('name')?.errors?.['maxlength']) && userForm.get('name')?.touched) {
        <small class="text-red-700 mb-20">Nome precisa ter entre 3 e 50 caracteres</small>
      }
    </div>

    <div class="mb-2">
      <p-floatlabel>
        <input pInputText id="inputEmail" autocomplete="off" formControlName="email" class="w-full" />
        <label for="inputEmail">E-mail</label>
      </p-floatlabel>
      @if (userForm.get('email')?.errors?.['required'] && userForm.get('email')?.touched) {
        <small class="text-red-700">E-mail é obrigatório</small>
      }
      @if (userForm.get('email')?.errors?.['email'] && userForm.get('email')?.touched) {
        <small class="text-red-700">E-mail inválido</small>
      }
      @if ((userForm.get('email')?.errors?.['minlength'] || userForm.get('email')?.errors?.['maxlength']) && userForm.get('email')?.touched) {
        <small class="text-red-700">E-mail precisa ter até 60 caracteres</small>
      }
    </div>

    <div class="mb-2">
      <p-floatlabel>
        <input pInputText id="inputPassword" autocomplete="off" formControlName="password" class="w-full" type="password" />
        <label for="inputPassword">Senha</label>
      </p-floatlabel>
      @if (userForm.get('password')?.errors?.['required'] && userForm.get('password')?.touched) {
        <small class="text-red-700">Senha é obrigatória</small>
      }
      @if ((userForm.get('password')?.errors?.['minlength'] || userForm.get('password')?.errors?.['maxlength']) && userForm.get('password')?.touched) {
        <small class="text-red-700">Senha precisa ter entre 6 e 20 caracteres</small>
      }
    </div>

    <div class="mb-2">
      <p-floatlabel>
        <input pInputText id="inputPasswordConfirmation" autocomplete="off" formControlName="passwordConfirmation" class="w-full" type="password"  />
        <label for="inputPasswordConfirmation">Confirmação de senha</label>
      </p-floatlabel>
      @if (userForm.get('passwordConfirmation')?.errors?.['required'] && userForm.get('passwordConfirmation')?.touched) {
        <small class="text-red-700">Senha é obrigatória</small>
      }
      @if (userForm.errors?.['passwordMismatch'] && userForm.get('passwordConfirmation')?.touched && !userForm.get('passwordConfirmation')?.errors?.['required']) {
        <small class="text-red-700">Senhas divergentes</small>
      }
    </div>

  </div>

  <p-button
    id="btnSubmit"
    [disabled]="userForm.invalid"
    label="Gravar"
    icon="pi pi-save"
    (click)="submit()"
  />

</form>
